<!-- src/app/features/reports/reports-dashboard/reports-dashboard.component.html -->
<div class="reports-container">
  
  <!-- Page Header -->
  <div class="page-header">
    <div class="header-left">
      <h1> Reports & Analytics</h1>
      <p>Track performance and gain insights</p>
    </div>
    
    <div class="header-actions">
      <div class="period-selector">
        <button 
          *ngFor="let period of ['week', 'month', 'quarter', 'year']"
          class="period-btn"
          [class.active]="selectedPeriod === period"
          (click)="changePeriod(period)"
        >
          {{ period | titlecase }}
        </button>
      </div>
      
      <button class="btn-secondary" (click)="navigateToCustomReport()">
        <i class="fas fa-sliders-h"></i>
        <span>Custom Report</span>
      </button>
      
      <button class="btn-primary" (click)="navigateToExport()">
        <i class="fas fa-download"></i>
        <span>Export</span>
      </button>
    </div>
  </div>

  <!-- Stats Grid -->
  <div class="stats-grid">
    <div *ngFor="let stat of stats" class="stat-card">
      <div class="stat-header">
        <div class="stat-icon" [style.background]="stat.color + '22'" [style.color]="stat.color">
          <i class="fas" [ngClass]="stat.icon"></i>
        </div>
        <div class="stat-trend" [class.trend-up]="stat.trendUp">
          <i class="fas" [ngClass]="stat.trendUp ? 'fa-arrow-up' : 'fa-arrow-down'"></i>
          <span>{{ stat.trend }}</span>
        </div>
      </div>
      <div class="stat-content">
        <div class="stat-label">{{ stat.label }}</div>
        <div class="stat-value" [style.color]="stat.color">{{ stat.value }}</div>
      </div>
    </div>
  </div>

  <!-- Charts Grid -->
  <div class="charts-grid">
    
    <!-- Sales Trend Chart -->
    <div class="chart-card">
      <div class="card-header">
        <h3> Sales Trend</h3>
        <span class="card-subtitle">Revenue over time (in Lakhs)</span>
      </div>
      <div class="chart-body">
        <div class="bar-chart">
          <div *ngFor="let value of salesTrend.values; let i = index" class="bar-wrapper">
            <div class="bar-container">
              <div 
                class="bar"
                [style.height.%]="getBarHeight(value)"
              >
                <span class="bar-value">{{ value }}</span>
              </div>
            </div>
            <div class="bar-label">{{ salesTrend.labels[i] }}</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Lead Sources Chart -->
    <div class="chart-card">
      <div class="card-header">
        <h3> Lead Sources</h3>
        <span class="card-subtitle">Total: {{ getTotalLeads() }} leads</span>
      </div>
      <div class="chart-body">
        <div class="source-list">
          <div *ngFor="let source of leadSources" class="source-item">
            <div class="source-header">
              <div class="source-info">
                <span class="source-dot" [style.background]="source.color"></span>
                <span class="source-name">{{ source.name }}</span>
              </div>
              <div class="source-stats">
                <span class="source-count">{{ source.value }}</span>
                <span class="source-percentage">{{ source.percentage }}%</span>
              </div>
            </div>
            <div class="source-bar-bg">
              <div 
                class="source-bar-fill"
                [style.width.%]="source.percentage"
                [style.background]="source.color"
              ></div>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>

  <!-- Bottom Grid -->
  <div class="bottom-grid">
    
    <!-- Deal Pipeline Funnel -->
    <div class="chart-card">
      <div class="card-header">
        <h3> Deal Pipeline</h3>
        <span class="card-subtitle">Total: {{ formatCurrency(getPipelineTotal()) }}</span>
      </div>
      <div class="chart-body">
        <div class="pipeline-funnel">
          <div *ngFor="let stage of pipelineData" class="funnel-stage">
            <div class="stage-bar" [style.background]="stage.color + '33'" [style.border-left-color]="stage.color">
              <div class="stage-info">
                <span class="stage-name">{{ stage.stage }}</span>
                <span class="stage-count">{{ stage.count }} deals</span>
              </div>
              <div class="stage-value">{{ formatCurrency(stage.value) }}</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Top Performers -->
    <div class="chart-card">
      <div class="card-header">
        <h3> Top Performers</h3>
        <span class="card-subtitle">This {{ selectedPeriod }}</span>
      </div>
      <div class="chart-body">
        <div class="performers-list">
          <div *ngFor="let performer of topPerformers; let i = index" class="performer-item">
            <div class="performer-rank">{{ i + 1 }}</div>
            <div class="performer-avatar">{{ performer.avatar }}</div>
            <div class="performer-info">
              <div class="performer-name">{{ performer.name }}</div>
              <div class="performer-stats">
                <span>{{ performer.deals }} deals</span>
                <span class="separator">•</span>
                <span>{{ formatCurrency(performer.revenue) }}</span>
              </div>
            </div>
            <div class="performer-badge" *ngIf="i === 0">
              <i class="fas fa-crown"></i>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Recent Activities -->
    <div class="chart-card">
      <div class="card-header">
        <h3>⚡ Recent Activities</h3>
        <span class="card-subtitle">Last 24 hours</span>
      </div>
      <div class="chart-body">
        <div class="activities-list">
          <div *ngFor="let activity of recentActivities" class="activity-item">
            <div class="activity-icon" [style.background]="activity.color + '22'" [style.color]="activity.color">
              <i class="fas" [ngClass]="activity.icon"></i>
            </div>
            <div class="activity-content">
              <div class="activity-type">{{ activity.type }}</div>
              <div class="activity-description">{{ activity.description }}</div>
            </div>
            <div class="activity-time">{{ activity.time }}</div>
          </div>
        </div>
      </div>
    </div>

  </div>

</div>